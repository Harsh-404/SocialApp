<!-- Chat Layout -->
<div class="chat-wrapper">
    <!-- Sidebar -->
    <aside class="chat-sidebar">
        <div class="sidebar-header">
            <button class="back-btn" routerLink="/feed">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2">
                    <line x1="19" y1="12" x2="5" y2="12" />
                    <polyline points="12 19 5 12 12 5" />
                </svg>
            </button>
            <h2 class="sidebar-title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
                </svg>
                Chat
            </h2>
        </div>

        <div class="sidebar-info">
            <div class="connection-status" [class.connected]="isConnected">
                <span class="status-dot"></span>
                <span>{{ isConnected ? 'Connected' : 'Connecting...' }}</span>
            </div>
        </div>

        <div class="sidebar-footer">
            <div class="online-count">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                    <circle cx="9" cy="7" r="4" />
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                    <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                </svg>
                <span>Group Chat</span>
            </div>
        </div>
    </aside>

    <!-- Main Chat Area -->
    <main class="chat-main">
        <!-- Chat Header -->
        <div class="chat-header">
            <div class="chat-header-info">
                <div class="chat-avatar">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                        <circle cx="9" cy="7" r="4" />
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                        <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                    </svg>
                </div>
                <div class="chat-meta">
                    <h3>Group Chat</h3>
                    <span class="chat-subtitle">{{ receivedMessages.length }} messages</span>
                </div>
            </div>
        </div>

        <!-- Messages Area -->
        <div class="messages-container" #messagesContainer>
            <!-- Welcome Message -->
            <div class="welcome-message" *ngIf="receivedMessages.length === 0">
                <div class="welcome-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
                    </svg>
                </div>
                <h3>Welcome to the Chat!</h3>
                <p>Send a message below to get started</p>
            </div>

            <!-- Messages -->
            <div class="message-bubble" *ngFor="let msg of receivedMessages; let i = index" [class.alt]="i % 2 !== 0">
                <div class="msg-avatar">{{ msg[0] || '?' }}</div>
                <div class="msg-content">
                    <p class="msg-text">{{ msg }}</p>
                    <span class="msg-time">Just now</span>
                </div>
            </div>
        </div>

        <!-- Message Input -->
        <div class="message-input-area">
            <form (ngSubmit)="sendMessage()" #messageForm="ngForm" class="input-form">
                <div class="input-wrapper">
                    <input type="text" name="message" [(ngModel)]="message" placeholder="Type a message..." required
                        autocomplete="off">
                </div>
                <button type="submit" class="send-btn" [disabled]="!message.trim()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2">
                        <line x1="22" y1="2" x2="11" y2="13" />
                        <polygon points="22 2 15 22 11 13 2 9 22 2" />
                    </svg>
                </button>
            </form>
        </div>
    </main>
</div>